@model Fitcard.Web.Models.Estabelecimento

@{
    ViewBag.Title = "Editar";
}

<h2>Editar Estabelecimento</h2>


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    
    <div class="form-horizontal">
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.HiddenFor(model => model.EST_ID)

        <div class="form-group">
            @Html.Label("Estabelecimento", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.EST_NOME, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.EST_NOME, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.Label("Nome Fantasia", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.EST_NOME_FANTASIA, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.EST_NOME_FANTASIA, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.Label("CNPJ", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.EST_CNPJ, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.EST_CNPJ, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.Label("E-mail", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.EST_EMAIL, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.EST_EMAIL, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.Label("Telefone", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.EST_TELEFONE, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.EST_TELEFONE, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.Label("Categoria", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownList("CAT_ID", null, htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.CAT_ID, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.Label("Status", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <div class="checkbox">
                    @Html.HiddenFor(model => model.EST_STATUS, new { id = "EST_STATUS" })
                    @Html.ValidationMessageFor(model => model.EST_STATUS, "", new { @class = "text-danger" })
                    
                    @if (@Model.EST_STATUS == 1)
                    {
                    <input type="checkbox" checked data-toggle="toggle" data-on="Ativo" data-off="Inativo" onchange="Func_status()" id="chk_status">
                    }
                    else
                    {
                        <input type="checkbox"  data-toggle="toggle" data-on="Ativo" data-off="Inativo" onchange="Func_status()" id="chk_status">
                    }
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-10">
                <a href="@Url.Action("Index", "Estabelecimento") " class="btn btn-primary">
                    Voltar
                </a>
                <input type="submit" value="Salvar" class="btn btn-primary" />
            </div>
        </div>
    </div>
}



<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

<script>

    $(document).ready(function () {
        
        if( $("#EST_STATUS").val() == 1)
        {
        $('#chk_status').prop('checked', true).change();

        }

    })

    function Func_status()
    {
        var value = $("#chk_status").val();
        
        if (value == "on")
        {
            $("#EST_STATUS").val(0)
        } else {
            $("#EST_STATUS").val(1)

        }

    }

    $("input[type='checkbox']").toggle(
    function () {
        debugger
        $(this).val("on");
    },
    function () {
        $(this).val("off");
    }
);

</script>